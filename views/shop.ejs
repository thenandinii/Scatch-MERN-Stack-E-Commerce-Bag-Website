<%- include('./partials/header') %>


<!-- ðŸŽ‰ Flash Message -->
<% if (success.length > 0) { %>
  <div class="fixed top-6 left-1/2 -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-full shadow-lg z-50">
    <%= success %>
  </div>
<% } %>

<!-- ðŸ›ï¸ Shop Section -->
<section class="min-h-screen bg-[#f9f9ff] px-6 md:px-16 py-12 font-['Poppins']">

  <div class="flex flex-col lg:flex-row gap-10">

    <!-- Sidebar -->
    <aside class="w-full lg:w-1/4 bg-white p-6 rounded-xl shadow-xl sticky top-24 h-fit">
      <h2 class="text-xl font-bold mb-4">Filters</h2>

      <div class="mb-6">
        <label class="block mb-1 font-medium text-gray-700">Sort By</label>
        <form action="/shop">
          <select name="sortby" class="w-full border-gray-300 px-3 py-2 rounded focus:ring-2 focus:ring-blue-500">
            <option value="popular">Most Popular</option>
            <option value="newest">Newest First</option>
          </select>
        </form>
      </div>

      <div class="space-y-2">
        <a href="#" class="text-blue-600 hover:underline block">New Collection</a>
        <a href="#" class="text-blue-600 hover:underline block">All Products</a>
        <a href="#" class="text-blue-600 hover:underline block">On Sale</a>
      </div>

      <div class="mt-6 border-t pt-4 space-y-2">
        <p class="text-gray-600 font-medium">Availability</p>
        <p class="text-gray-600 font-medium">Discount Range</p>
      </div>
    </aside>

    <!-- Product Grid -->
    <div class="w-full lg:w-3/4 grid sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8">
      <% products.forEach(function(product){ %>
        <div class="group overflow-hidden rounded-xl shadow-lg bg-white transition hover:shadow-2xl">

          <!-- Product Image -->
          <div class="bg-[<%= product.bgcolor %>] h-52 flex items-center justify-center">
            <img src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" alt="<%= product.name %>"
              class="h-40 group-hover:scale-105 transition-transform duration-300">
            <% if(product.discount > 0){ %>
              <span class="absolute top-3 left-3 bg-red-500 text-white px-2 py-1 text-xs rounded-full">
                -<%= product.discount %>%
              </span>
            <% } %>
          </div>

          <!-- Product Details -->
          <div class="bg-[<%= product.panelcolor %>] p-4 text-[<%= product.textcolor %>]">
            <h3 class="font-semibold text-lg truncate"><%= product.name %></h3>
            <div class="flex justify-between items-center mt-2">
              <p class="font-bold text-md">â‚¹ <%= product.price %></p>
              <a href="/addtocart/<%= product._id %>" class="w-8 h-8 bg-white flex items-center justify-center rounded-full hover:bg-gray-100 transition">
                <i class="ri-add-line text-xl"></i>
              </a>
            </div>
          </div>

        </div>
      <% }) %>
    </div>

  </div>
</section>

<%- include('./partials/footer') %>


